# === Application ===
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
SERVICE_NAME=wasaa-pesaflow-ml
SERVICE_VERSION=1.0.0
HOST=0.0.0.0
PORT=8000
WORKERS=4

# === Database (shared with pesaflow-backend) ===
DATABASE_URL=postgresql+asyncpg://pesaflow:pesaflow_secure_2024@localhost:5432/pesaflow
DATABASE_SYNC_URL=postgresql://pesaflow:pesaflow_secure_2024@localhost:5432/pesaflow
DATABASE_SCHEMA=ai_schema

# === Redis (ML-dedicated instance) ===
REDIS_URL=redis://localhost:26379/0
REDIS_FEATURE_TTL=300
REDIS_VELOCITY_TTL_1H=3600
REDIS_VELOCITY_TTL_24H=86400

# === Kafka ===
KAFKA_BOOTSTRAP_SERVERS=localhost:29094
KAFKA_GROUP_ID=pesaflow-ml-group
KAFKA_CLIENT_ID=pesaflow-ml
KAFKA_SECURITY_PROTOCOL=PLAINTEXT

# === Model Storage ===
MODEL_STORAGE_PATH=./model_artifacts
S3_BUCKET=pesaflow-ml-models
AWS_REGION=af-south-1

# === MLflow (dedicated DB) ===
MLFLOW_TRACKING_URI=http://localhost:15937
MLFLOW_EXPERIMENT_FRAUD=pesaflow-fraud-detection
MLFLOW_EXPERIMENT_AML=pesaflow-aml-scoring
MLFLOW_DB_URL=postgresql://pesaflow_ml:ml_db_secure_2024@localhost:25431/pesaflow_mlflow

# === Airflow (dedicated DB) ===
AIRFLOW_DB_URL=postgresql+psycopg2://pesaflow_ml:ml_db_secure_2024@localhost:25431/pesaflow_airflow

# === JWT Auth ===
JWT_SECRET=your-secret-key-change-in-production
JWT_ALGORITHM=HS256

# === Fraud Model Defaults ===
FRAUD_MODEL_VERSION=v1.0.0
FRAUD_APPROVE_THRESHOLD=0.60
FRAUD_REVIEW_THRESHOLD=0.75
FRAUD_BLOCK_THRESHOLD=0.90

# === AML Model Defaults ===
AML_MODEL_VERSION=v1.0.0
AML_MEDIUM_THRESHOLD=0.50
AML_HIGH_THRESHOLD=0.70
AML_CRITICAL_THRESHOLD=0.85

# === Sanctions ===
SANCTIONS_FUZZY_THRESHOLD=0.85

# === Feature Store (Feast) ===
FEAST_REPO_PATH=./feature_repo

# =============================================================================
# Port Map (randomized to avoid host conflicts):
#   ML API:             localhost:18743
#   ML Postgres:        localhost:25431  (Airflow + MLflow DBs only)
#   ML Redis:           localhost:26379
#   ML Kafka:           localhost:29094
#   MLflow UI:          localhost:15937
#   Airflow Webserver:  localhost:28080
#
# Backend services (from pesaflow-backend docker-compose):
#   Postgres:           localhost:5432   (shared â€” main data)
#   Redis:              localhost:6379   (backend)
#   Kafka:              localhost:9092   (backend)
# =============================================================================
